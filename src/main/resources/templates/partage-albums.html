<!DOCTYPE html>
<html lang="fr"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Partage des albums</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</head>
<body>
<a th:href="@{/albums}">Retour</a>
<h1>Détails album</h1>

<p th:text="${album.name}"></p>
<p th:text="${album.description}"></p>

<h1>Liste utilisateur</h1>

<table class="table table-striped table-bordered table-hover">
    <thead class="table-dark">
    <tr>
        <th>Prénom</th>
        <th>Nom</th>
        <th>Modifier partage</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="user: ${users}">
        <td th:text="${user.firstName}"></td>
        <td th:text="${user.lastName}"></td>
        <td>
            <form method="post" th:action="@{'/albums/partage/' + ${album.id} + '/' + ${user.id}}" >
                <fieldset>
                    <div>
                        <input type="radio" id="view-radio" name="permission" value="VIEW" th:checked="${user.permissionLevel != null && user.permissionLevel == 'VIEW'}" />
                        <label for="view-radio">Lecture</label>
                    </div>

                    <div>
                        <input type="radio" id="edit-radio" name="permission" value="EDIT" th:checked="${user.permissionLevel != null && user.permissionLevel == 'EDIT'}" />
                        <label for="edit-radio">Ecriture</label>
                    </div>

                    <div>
                        <input type="radio" id="sharing-radio" name="permission" value="NO-SHARING" th:checked="${user.permissionLevel == null}" />
                        <label for="sharing-radio">Ne pas partager</label>
                    </div>
                </fieldset>
                <button type="submit">Modifier les permissions</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>
</body>
</html>